{"version":3,"sources":["../src/index.js"],"names":["MemoryStorage","logger","initialState","storage","Object","assign","key","value","callback","Promise","resolve","reject","log","keys"],"mappings":";;;IAAqBA,a;AACnB,2BAAiD;AAAA,mFAAJ,EAAI;AAAA,QAAlCC,MAAkC,QAAlCA,MAAkC;AAAA,iCAA1BC,YAA0B;AAAA,QAA1BA,YAA0B,kCAAX,EAAW;;AAAA;;AAC/C,SAAKC,OAAL,GAAeC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBH,YAAlB,CAAf;AACA,SAAKD,MAAL,GAAcA,MAAd;AACD;;;;WAED,eAAc;AACZ,UAAI,KAAKA,MAAL,IAAe,OAAO,KAAKA,MAAZ,KAAuB,UAA1C,EAAsD;AACpD,aAAKA,MAAL;AACD;AACF;;;WACD,iBAASK,GAAT,EAAcC,KAAd,EAAqBC,QAArB,EAA+B;AAAA;;AAC7B,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,QAAA,KAAI,CAACR,OAAL,CAAaG,GAAb,IAAoBC,KAApB;;AACA,QAAA,KAAI,CAACK,GAAL,CAAS,qBAAT,EAAgCN,GAAhC,EAAqCC,KAArC;;AACA,YAAIC,QAAJ,EAAcA,QAAQ,CAAC,IAAD,EAAOD,KAAP,CAAR;AACdG,QAAAA,OAAO,CAACH,KAAD,CAAP;AACD,OALM,CAAP;AAMD;;;WAED,iBAASD,GAAT,EAAcE,QAAd,EAAwB;AAAA;;AACtB,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,QAAA,MAAI,CAACC,GAAL,CAAS,qBAAT,EAAgCN,GAAhC;;AACA,YAAMC,KAAK,GAAG,MAAI,CAACJ,OAAL,CAAaG,GAAb,CAAd;AACA,YAAIE,QAAJ,EAAcA,QAAQ,CAAC,IAAD,EAAOD,KAAP,CAAR;AACdG,QAAAA,OAAO,CAACH,KAAD,CAAP;AACD,OALM,CAAP;AAMD;;;WAED,oBAAYD,GAAZ,EAAiBE,QAAjB,EAA2B;AAAA;;AACzB,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,QAAA,MAAI,CAACC,GAAL,CAAS,wBAAT,EAAmCN,GAAnC;;AACA,YAAMC,KAAK,GAAG,MAAI,CAACJ,OAAL,CAAaG,GAAb,CAAd;AACA,eAAO,MAAI,CAACH,OAAL,CAAaG,GAAb,CAAP;AACA,YAAIE,QAAJ,EAAcA,QAAQ,CAAC,IAAD,EAAOD,KAAP,CAAR;AACdG,QAAAA,OAAO,CAACH,KAAD,CAAP;AACD,OANM,CAAP;AAOD;;;WAED,oBAAYC,QAAZ,EAAsB;AAAA;;AACpB,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,QAAA,MAAI,CAACC,GAAL,CAAS,mBAAT;;AACA,YAAMC,IAAI,GAAGT,MAAM,CAACS,IAAP,CAAY,MAAI,CAACV,OAAjB,CAAb;AACA,YAAIK,QAAJ,EAAcA,QAAQ,CAAC,IAAD,EAAOK,IAAP,CAAR;AACdH,QAAAA,OAAO,CAACG,IAAD,CAAP;AACD,OALM,CAAP;AAMD;;;;;;SA9CkBb,a","sourcesContent":["export default class MemoryStorage {\n  constructor ({ logger, initialState = {} } = {}) {\n    this.storage = Object.assign({}, initialState)\n    this.logger = logger\n  }\n\n  log (...args) {\n    if (this.logger && typeof this.logger === 'function') {\n      this.logger(...args)\n    }\n  }\n  setItem (key, value, callback) {\n    return new Promise((resolve, reject) => {\n      this.storage[key] = value\n      this.log('setItem called with', key, value)\n      if (callback) callback(null, value)\n      resolve(value)\n    })\n  }\n\n  getItem (key, callback) {\n    return new Promise((resolve, reject) => {\n      this.log('getItem called with', key)\n      const value = this.storage[key]\n      if (callback) callback(null, value)\n      resolve(value)\n    })\n  }\n\n  removeItem (key, callback) {\n    return new Promise((resolve, reject) => {\n      this.log('removeItem called with', key)\n      const value = this.storage[key]\n      delete this.storage[key]\n      if (callback) callback(null, value)\n      resolve(value)\n    })\n  }\n\n  getAllKeys (callback) {\n    return new Promise((resolve, reject) => {\n      this.log('getAllKeys called')\n      const keys = Object.keys(this.storage)\n      if (callback) callback(null, keys)\n      resolve(keys)\n    })\n  }\n}\n"],"file":"index.js"}