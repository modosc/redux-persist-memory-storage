{"version":3,"sources":["../src/index.js"],"names":["MemoryStorage","logger","initialState","storage","Object","assign","key","value","callback","Promise","resolve","reject","log","keys"],"mappings":";;;;IAAqBA,a;AACnB,2BAAiD;AAAA,mFAAJ,EAAI;AAAA,QAAlCC,MAAkC,QAAlCA,MAAkC;AAAA,iCAA1BC,YAA0B;AAAA,QAA1BA,YAA0B,qCAAX,EAAW;;AAAA;;AAC/C,SAAKC,OAAL,GAAeC,OAAOC,MAAP,CAAc,EAAd,EAAkBH,YAAlB,CAAf;AACA,SAAKD,MAAL,GAAcA,MAAd;AACD;;;;0BAEa;AACZ,UAAI,KAAKA,MAAL,IAAe,OAAO,KAAKA,MAAZ,KAAuB,UAA1C,EAAsD;AACpD,aAAKA,MAAL;AACD;AACF;;;4BACQK,G,EAAKC,K,EAAOC,Q,EAAU;AAAA;;AAC7B,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,cAAKR,OAAL,CAAaG,GAAb,IAAoBC,KAApB;AACA,cAAKK,GAAL,CAAS,qBAAT,EAAgCN,GAAhC,EAAqCC,KAArC;AACA,YAAIC,QAAJ,EAAcA,SAAS,IAAT,EAAeD,KAAf;AACdG,gBAAQH,KAAR;AACD,OALM,CAAP;AAMD;;;4BAEQD,G,EAAKE,Q,EAAU;AAAA;;AACtB,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,eAAKC,GAAL,CAAS,qBAAT,EAAgCN,GAAhC;AACA,YAAMC,QAAQ,OAAKJ,OAAL,CAAaG,GAAb,CAAd;AACA,YAAIE,QAAJ,EAAcA,SAAS,IAAT,EAAeD,KAAf;AACdG,gBAAQH,KAAR;AACD,OALM,CAAP;AAMD;;;+BAEWD,G,EAAKE,Q,EAAU;AAAA;;AACzB,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,eAAKC,GAAL,CAAS,wBAAT,EAAmCN,GAAnC;AACA,YAAMC,QAAQ,OAAKJ,OAAL,CAAaG,GAAb,CAAd;AACA,eAAO,OAAKH,OAAL,CAAaG,GAAb,CAAP;AACA,YAAIE,QAAJ,EAAcA,SAAS,IAAT,EAAeD,KAAf;AACdG,gBAAQH,KAAR;AACD,OANM,CAAP;AAOD;;;+BAEWC,Q,EAAU;AAAA;;AACpB,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,eAAKC,GAAL,CAAS,mBAAT;AACA,YAAMC,OAAOT,OAAOS,IAAP,CAAY,OAAKV,OAAjB,CAAb;AACA,YAAIK,QAAJ,EAAcA,SAAS,IAAT,EAAeK,IAAf;AACdH,gBAAQG,IAAR;AACD,OALM,CAAP;AAMD;;;;;;eA9CkBb,a","file":"index.js","sourcesContent":["export default class MemoryStorage {\n  constructor ({ logger, initialState = {} } = {}) {\n    this.storage = Object.assign({}, initialState)\n    this.logger = logger\n  }\n\n  log (...args) {\n    if (this.logger && typeof this.logger === 'function') {\n      this.logger(...args)\n    }\n  }\n  setItem (key, value, callback) {\n    return new Promise((resolve, reject) => {\n      this.storage[key] = value\n      this.log('setItem called with', key, value)\n      if (callback) callback(null, value)\n      resolve(value)\n    })\n  }\n\n  getItem (key, callback) {\n    return new Promise((resolve, reject) => {\n      this.log('getItem called with', key)\n      const value = this.storage[key]\n      if (callback) callback(null, value)\n      resolve(value)\n    })\n  }\n\n  removeItem (key, callback) {\n    return new Promise((resolve, reject) => {\n      this.log('removeItem called with', key)\n      const value = this.storage[key]\n      delete this.storage[key]\n      if (callback) callback(null, value)\n      resolve(value)\n    })\n  }\n\n  getAllKeys (callback) {\n    return new Promise((resolve, reject) => {\n      this.log('getAllKeys called')\n      const keys = Object.keys(this.storage)\n      if (callback) callback(null, keys)\n      resolve(keys)\n    })\n  }\n}\n"]}